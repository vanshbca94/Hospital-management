<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Doctors - Hospital Management System</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    /* trimmed/embedded CSS ‚Äî keep your css/style.css for global styles */
    body{margin:0;font-family:'Poppins',sans-serif;background:radial-gradient(circle at top,#0f172a,#1e293b);color:#f1f5f9;overflow-x:hidden}
    .navbar{display:flex;justify-content:space-between;align-items:center;padding:18px 6%;background:rgba(10,15,35,0.8);backdrop-filter:blur(10px);position:sticky;top:0;z-index:100}
    .nav-links{list-style:none;display:flex;gap:20px;margin:0;padding:0}
    .nav-links a{color:#d1d5db;text-decoration:none;font-weight:500}
    .hamburger{display:none;cursor:pointer;font-size:1.6rem;color:#fff}
    @media (max-width:768px){.nav-links{display:none;flex-direction:column;background:rgba(0,0,0,0.9);position:absolute;top:60px;right:6%;padding:18px;border-radius:10px}.nav-links.show{display:flex}.hamburger{display:block}}
    .hero{text-align:center;padding:60px 20px 30px}
    .hero h1{font-size:2.4rem;background:linear-gradient(90deg,#06b6d4,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero p{color:#cbd5e1}
    .register-btn{display:inline-block;margin-top:20px;padding:12px 24px;background:linear-gradient(90deg,#3b82f6,#a78bfa);color:#fff;border-radius:10px;text-decoration:none;font-weight:600}
    .search-filter{display:flex;justify-content:center;flex-wrap:wrap;gap:12px;margin:25px auto;max-width:900px}
    .search-filter input,.search-filter select{padding:12px 16px;border-radius:10px;border:none;background:rgba(255,255,255,0.08);color:#fff}
    .doctor-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;max-width:1100px;margin:30px auto;padding:0 20px}
    .doctor-card{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);border-radius:16px;padding:24px;text-align:center;transition:all .25s}
    .doctor-card img{width:80px;height:80px;border-radius:50%;object-fit:cover;border:2px solid #06b6d4;margin-bottom:10px}
    .status.available{color:#22c55e}.status.busy{color:#ef4444}
    .btn{display:inline-block;margin-top:10px;padding:10px 18px;background:linear-gradient(90deg,#06b6d4,#3b82f6,#a78bfa);color:#fff;border-radius:8px;text-decoration:none;font-weight:600}
    footer{text-align:center;padding:20px;color:#94a3b8;margin-top:40px}
  </style>
</head>
<body>
  <header class="navbar">
    <div class="logo">üè• <strong>HMS</strong></div>

    <nav>
      <ul class="nav-links" id="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="doctors.html" aria-current="page">Doctors</a></li>
        <li><a href="appointment.html">Appointments</a></li>
        <li><a href="attendance.html">Attendance</a></li>
      </ul>
    </nav>

    <div class="hamburger" id="hamburger" aria-label="Open menu">‚ò∞</div>
  </header>

  <main>
    <section class="hero">
      <h1>Our Doctors</h1>
      <p>Meet our specialists and book appointments instantly.</p>
      <a href="doctor_register.html" class="register-btn">‚ûï Register New Doctor</a>
    </section>

    <div class="search-filter" aria-hidden="false">
      <input id="searchDoctor" type="text" placeholder="üîç Search by name..." />
      <select id="filterSpecialty" aria-label="Filter by specialty">
        <option value="">All Specialties</option>
        <option value="Cardiologist">Cardiologist</option>
        <option value="Neurologist">Neurologist</option>
        <option value="Pediatrician">Pediatrician</option>
        <option value="Orthopedic Surgeon">Orthopedic Surgeon</option>
      </select>
    </div>

    <section id="doctorGrid" class="doctor-grid" aria-live="polite">
      <p>Loading doctors...</p>
    </section>
  </main>

  <footer><p>¬© 2025 Hospital Management System ‚Ä¢ Doctors Directory by Vansh</p></footer>

  <!-- Firestore (modular) - uses your NEW project config -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB1F-08xqgsdTR9oGmNqtFzlBJNv86UVpM",
      authDomain: "hospital-management-5cb17.firebaseapp.com",
      projectId: "hospital-management-5cb17",
      storageBucket: "hospital-management-5cb17.firebasestorage.app",
      messagingSenderId: "1077408582965",
      appId: "1:1077408582965:web:21668368b4793cf98f107c",
      measurementId: "G-JEY8DE5FC9"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const doctorGrid = document.getElementById("doctorGrid");
    const searchInput = document.getElementById("searchDoctor");
    const filterSelect = document.getElementById("filterSpecialty");

    // Real-time load (auto-updates). Uses collection "doctors".
    const doctorsRef = collection(db, "doctors");
    const q = query(doctorsRef, orderBy("name"));

    onSnapshot(q, snapshot => {
      doctorGrid.innerHTML = "";
      if (snapshot.empty) {
        doctorGrid.innerHTML = "<p>No doctors found. Use Register to add one.</p>";
        return;
      }
      snapshot.forEach(doc => {
        const d = doc.data();
        const card = document.createElement("div");
        card.className = "doctor-card";
        card.innerHTML = `
          <img src="${d.image || 'https://cdn-icons-png.flaticon.com/512/2966/2966485.png'}" alt="${d.name || 'Doctor'}" />
          <h3>${d.name || 'Unnamed'}</h3>
          <p>${d.specialty || ''}</p>
          <p class="status ${d.status || 'busy'}">${d.status === 'available' ? '‚úî Available' : '‚úñ Busy'}</p>
          <a class="btn ${d.status === 'busy' ? 'disabled' : ''}" href="appointment.html?doctor=${encodeURIComponent(d.name||'')}">
            ${d.status === 'busy' ? 'Not Available' : 'Book Appointment'}
          </a>
        `;
        doctorGrid.appendChild(card);
      });
      // run filter each time snapshot updates (keep search/filter in sync)
      filterDoctors();
    }, err => {
      console.error("Firestore onSnapshot error:", err);
      doctorGrid.innerHTML = `<p>‚ö†Ô∏è ${err.message}</p>`;
    });

    // Search + filter
    function filterDoctors() {
      const search = searchInput.value.trim().toLowerCase();
      const specialty = filterSelect.value;
      const cards = doctorGrid.querySelectorAll(".doctor-card");
      cards.forEach(card => {
        const name = (card.querySelector("h3")?.textContent || "").toLowerCase();
        const spec = (card.querySelector("p")?.textContent || "");
        const matchesSearch = name.includes(search);
        const matchesFilter = (specialty === "") || (spec === specialty);
        card.style.display = (matchesSearch && matchesFilter) ? "block" : "none";
      });
    }
    searchInput.addEventListener("input", filterDoctors);
    filterSelect.addEventListener("change", filterDoctors);

    // hamburger
    const hamburger = document.getElementById("hamburger");
    const navLinks = document.getElementById("nav-links");
    if (hamburger) {
      hamburger.addEventListener("click", () => navLinks.classList.toggle("show"));
    }
  </script>
</body>
</html>
